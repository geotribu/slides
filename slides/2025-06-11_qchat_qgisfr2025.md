---
date: 2025-06-11
title: QChat, un tchat dans QGIS et QField
transition: slide
---

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_cover_bg.png" data-background-size="cover" -->

## QChat

:speech_balloon: Un _chat_ dans QGIS et QField !

<img src="https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/cat.png" alt="Une photo de chat avec les logos de Geotribu et QGIS" style="height:250px;">

**#QGISFR2025** - 11 Juin 2025 - Avignon

Guilhem Allaman - <img src="https://cdn.geotribu.fr/img/logos-icones/social/mastodon.png" alt="Logo Mastodon" style="height:40px;vertical-align:middle;"> [@guilhem_allaman@mapstodon.space](https://mapstodon.space/@guilhem_allaman)

[Geotribu](https://geotribu.fr/) - <img src="https://cdn.geotribu.fr/img/logos-icones/social/mastodon.png" alt="Logo Mastodon" style="height:40px;vertical-align:middle;">  [@geotribu@mapstodon.space](https://mapstodon.space/@geotribu)

[OPENGIS.ch](https://www.opengis.ch/) - <img src="https://cdn.geotribu.fr/img/logos-icones/social/mastodon.png" alt="Logo Mastodon" style="height:40px;vertical-align:middle;">  [@opengisch@fosstodon.org](https://fosstodon.org/@opengisch)

<img src="https://geotribu.fr/theme/assets/images/geotribu/logo_geotribu.png" alt="Logo de Geotribu" style="height:120px;vertical-align:middle;"><img src="https://i0.wp.com/www.opengis.ch/wp-content/uploads/2024/03/logo_opengisch_open-source-geoninjas.png?fit=1824%2C671&ssl=1" alt="Logo de OPENGIS.ch" style="height:120px;vertical-align:middle;">

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

## :question: QChat: pr√©parez-vous ! :question:

Un quizz est pr√©vu en fin de s√©ance :wink:, comment participer ?

- soit ouvrir QGIS puis installer le plugin [`QTribu`](https://plugins.qgis.org/plugins/qtribu/) et renseigner votre pseudo dans les param√®tres
- soit ouvrir [`https://gischat.geotribu.net`](https://gischat.geotribu.net) dans un navigateur :

![QR code QChat web](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/gischat_web_qrcode.webp)

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### QChat : comment √ßa a commenc√©

Un jour... En juillet 2024...

![Un jardin bien vert avec un chien au premier plan](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/garden.jpeg)

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :iphone: Coup de fil spontan√©

Avec Julien Moura (complice de Geotribu) :

- Et si on tchattait dans QField ?
- Et si on tchattait dans QField **et** dans QGIS ?
- Mais... Pourquoi, en fait !?
- Et pourquoi pas ?

Inutile, donc indispensable !

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Commen√ßons par un plugin QGIS

Le plugin QGIS [QTribu](https://plugins.qgis.org/plugins/qtribu/) existe d√©j√† :

- fonctionnel
- enregistr√© sur `plugins.qgis.org`
- CICD op√©rationnelle

![QTribu sur plugins.qgis.org](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/qtribu_qgis_plugin.png)

_Fun fact: le plugin QTribu a √©t√© cr√©√© un 1er avril..._

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Objectifs de QChat

- ajouter du fun dans QGIS
- s'amuser √† d√©velopper ce tchat
- rencontrer les sigistes les plus :fire: de ta r√©gion, ou √† l'autre bout du monde - Qt-inder‚Ñ¢
- ouvrir des nouveaux usages : support & assistance, √©changes entre bureau et terrain, etc.

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### QChat au d√©but

- √âtudier les standards ouverts de chat d√©j√† existants (IRC, jabber, matrix...)  
-> Commen√ßons simple, "Keep it simple", [K.I.S.S.](https://en.wikipedia.org/wiki/KISS_principle) :kissing_heart:
- Ouvert et accessible pour tout un chacun  
-> T'as un QGIS -> Tu peux tchatter :speech_balloon:

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### D√©veloppement du plugin QGIS QTribu

- Au d√©but: le m√©chanisme [`LISTEN`](https://www.postgresql.org/docs/current/sql-listen.html) / [`NOTIFY`](https://www.postgresql.org/docs/current/sql-notify.html) de PostgreSQL consid√©r√©
- Choix: connexions de websockets au server -> [`QtWebSockets`](https://doc.qt.io/qt-6/qtwebsockets-index.html) disponible en `pyqgis` :thumbsup:
- Param√®tres [en utilisant le templater de plugins QGIS](https://oslandia.gitlab.io/qgis/template-qgis-plugin/)
- `QgsDockWidget` -> fluide et en parall√®le du canvas de QGIS

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Fonctionnalit√©s de QChat

- Envoyer des messages textes basiques
- Incarner _jusqu'au bout de ses ongles_ un _avatar_ (ic√¥nes natives de QGIS)
- Mentionner les autres avec `@jane_doe` / `@all`
- Notifications: barre des messages de QGIS, sons...
- Liker des messages :thumbsup:
- Partager des donn√©es vecteur l√©g√®res, des images, des screenshots de son QGIS, des SCR, des bbox...

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Serveur QChat

- "gischat": [d√©p√¥t sur GitHub](https://github.com/geotribu/gischat) #gischat
- En python avec _FastAPI_
- Dispatcher de websockets
- Pas de bases de donn√©es: simplement des websockets _stateless_ :kissing_heart:
- Image docker sur [DockerHub](https://hub.docker.com/r/gounux/gischat) et [GHCR](https://github.com/geotribu/gischat/pkgs/container/gischat)
- D√©ployable sur un serveur assez simplement  
-> 1 service + quelques variables d'environnement

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Syst√®me QChat - gischat

```mermaid
%%{init: {'theme':'forest', 'themeVariables': {'background':'transparent'}}}%%

graph LR
    subgraph Clients QChat
        QGISA[üíª QChat QGIS 1]
        QGISB[üíª QChat QGIS 2]
        QFieldA[üì± QChat QField]
    end
    subgraph Serveur gischat
        WSDispatcher[üö† Websocket Dispatcher]
        WSStorage[üó≥Ô∏è Websocket Rooms Storage]
    end

    QGISA --> |1Ô∏è‚É£üëã Ouvre une connexion pour une room| WSDispatcher
    WSDispatcher --> |2Ô∏è‚É£‚úÖ Enregistre la connexion pour la room| WSStorage

    QGISB --> |3Ô∏è‚É£üì¶ Envoie un message dans une room| WSStorage
    WSStorage --> |4Ô∏è‚É£üì¶ Diffuse le message √† la room| QGISA
    WSStorage --> |5Ô∏è‚É£üì¶ Diffuse le message √† la room| QFieldA
```

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Instances de chat QChat - gischat

2 serveurs connus √† l'heure actuelle:

- `gischat.geotribu.net`
-> pour tout le monde, en anglais
- `gischat.geotribu.fr`
-> pour tout le monde, en fran√ßais

Aussi: :phone: [annuaire des instances connues et d√©couvrables](https://github.com/geotribu/gischat/blob/main/instances.json) sur le d√©p√¥t GitHub

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Plugin QChat pour QField

<img src="https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/ecran_qchat_qfield_plugin.webp" alt="√âcran du plugin QChat dans QField" style="height:600px;">

:thumbsup: Cr√©dits √† Mathieu Pellerin - [@nirvn](https://github.com/nirvn)

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### QField Plugins Framework

_Live_ depuis printemps 2024 :

- Ajouter de la logique custom et m√©tier √† l'app QField :
  - √Ä l'√©chelle d'un projet, d√©ployable avec QFieldCloud
  - √Ä l'√©chelle de l'application (param√®tres)
- D√©veloppement en JavaScript / QML ([_Qt Meta-object Language_](https://doc.qt.io/qt-6/qtqml-index.html))

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Plugins QField : exemple - 1/3

#### [OSRM Routing plugin](https://github.com/opengisch/qfield-osrm)

<img src="https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/qfield_plugin_osrm_routing.webp" alt="√âcran du plugin OSRM Routing Plugin dans QField" style="height:600px;vertical-align:middle">

- Calculer un plus court chemin avec une API
- API OSRM - OpenStreetMap Germany
- -> dynamique -> appel et requ√™tes √† des APIs externes

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Plugins QField : exemples - 2/3

#### [Weather Forecast plugin](https://github.com/opengisch/qfield-weather-forecast)

<img src="https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/qfield_plugin_weather_forecast.webp" alt="√âcran du plugin Weather Forecast dans QField" style="height:600px;vertical-align:middle">

- Avoir la visu des pr√©dictions m√©t√©o dans QField (Open-Meteo)
- Couches en _overlay_ dans QField

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Plugins QField : exemples - 3/3

#### Plugin "Christmas Theme"

<img src="https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/qfield_plugin_christmas_theme.webp" alt="√âcran du plugin Christmas Theme dans QField" style="height:600px;vertical-align:middle">

- Customiser l'interface graphique de QField
- _"Brander"_ l'UI pour des partenaires / sous-traitants

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### QField Plugins Framework

- En l'√©tat : documentation pas forc√©ment triviale √† utiliser (d√©p√¥t GitHub)
- [_Cookbook_](https://docs.qfield.org/reference/plugins/) pour le d√©veloppement de plugins QField
- Pr√©vu d'am√©liorer la doc d'ici fin 2025
- Travaux en cours sur un d√©p√¥t de plugins QField -> plus simple √† installer

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :speech_balloon: Demo de QChat - QGIS & QField

<iframe
  src="https://video.osgeo.org/videos/embed/hAuB4Ze4gE2fgq9upbdxGm"
  style="width: 80%; aspect-ratio: 16 / 9;"
  frameborder="0"
  allowfullscreen
  sandbox="allow-same-origin allow-scripts allow-popups">
</iframe>

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Et maintenant ?

- Quelques personnes sur QChat, parfois...
- On fix des bugs, parfois...
- _Test coverage_ du serveur: `~94%` :smirk: :sunglasses: (< 500 lignes de code)
- Plugin am√©lior√© gr√¢ce aux retours des utilisateurs

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Retour d'exp√©rience

- Sympa de se frotter et d'√©prouver la robustesse de QGIS / Qt (websockets, etc).
- D√©couverte du framework de plugins QField :+1:
- Un peu l'impression d'avoir fait son protocole de messagerie dans son coin...

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Et la suite ?

- Cr√©er et publier un plugin appel√© "`QChat`" sur le d√©p√¥t officiel
- Cr√©er des compatibilit√©s / "bridges" avec les serveurs `matrix` (complexe !)
- D'autres trucs sympa: des emojis, des sons, des "threads", des easter eggs...
- Une UI plus fluide avec du QML -> partage de code entre les plugins QGIS et QField
- Partager des mod√®les graphiques ? Partager du code `pyqgis` ?

-> QGIS Remote Desktop ? Int√©ressant pour support & assistance

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Merci

![Une photo de vache avec les logos de Geotribu et QGIS](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/cow.png)

C'est le moment du quizz !

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

3 mani√®res de participer:

- dans QGIS, avec QChat dans le plugin `QTribu`
- dans QField, avec le plugin QChat
- URL: [`https://github.com/geotribu/qchat-qfield-plugin/releases/download/0.1.0/qfield-plugin-qchat.zip`](https://github.com/geotribu/qchat-qfield-plugin/releases/download/0.1.0/qfield-plugin-qchat.zip)
- dans un navigateur: [`https://gischat.geotribu.net`](https://gischat.geotribu.net) :

![QR code QChat web](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/gischat_web_qrcode.webp)

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

En quelle ann√©e a √©t√© cr√©√© QGIS ?

_Indice: le mur de Berlin √©tait d√©j√† tomb√©, mais QGIS IV n'√©tait pas encore sorti._

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

√Ä 10 000 pr√®s, combien de commits y-a-t'il √† date sur le d√©p√¥t QGIS ?

_Indice: plus que le nombre de personnes qui utilisent ArqMap, moins que le nombre de code d'erreurs possibles dans ArcGisse._

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

Combien existe-t-il √† date de plugins QField ?

_c.√†.d. nombre de d√©p√¥ts GitHub avec le tag `qfield-plugin`._

_Indice:_

<section data-markdown>$$ \left( \frac{7!}{(3! \cdot 2^3)} - \int_{0}^{1} e^x \, dx + \ln(e^2) \right) + \left( \frac{1}{2} \cdot \sqrt{36} \right) $$</section>

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

Combien de d√©p√¥ts publics contient l'organisation GitHub Geotribu ?

_Indice: entre 0 et 1 million._

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### :question: Quizz :question:

De quelle ann√©e date le premier article dans Geotribu ?

_Indice: cette ann√©e-l√†, Johnny chantait "√áa n'finira jamais"._

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_slide_bg.png" data-background-size="cover" -->

### Merci

![Une photo de chien avec les logos de Geotribu et QGIS](https://cdn.geotribu.fr/img/articles-blog-rdp/articles/2024/qchat/prez/dog.png)

_Remerciement sp√©cial √† [Mathieu Pellerin](https://github.com/nirvn) et [Julien Moura](https://github.com/guts) :thumbsup:_

√Ä l'avenir, n'h√©sitez pas √† passer une t√™te dans QChat !

----

<!-- .slide: data-background-image="https://cdn.geotribu.fr/img/slides/2025/qgisfr_geotribu-x-qgis/osgeo_qgis_rencontres_fr_2025_last_bg.png" data-background-size="cover" -->
